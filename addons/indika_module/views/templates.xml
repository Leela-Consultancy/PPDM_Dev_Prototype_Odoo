<odoo>



    <template id="website_details">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure oe_empty">
                <section class="s_banner parallax s_parallax_is_fixed pt96 pb96 o_colored_level"
                         data-scroll-background-ratio="1" data-snippet="s_banner" data-name="Banner"
                         style="background-image: none;">
                    <span class="s_parallax_bg oe_img_bg"></span>
<!--                          style="background-image: url('/web/image/website.s_banner_default_image'); background-position: 50% 0;"/>-->
                    <div class="container">
                        <div class="row s_nb_column_fixed o_grid_mode"
                             style="--grid-item-padding-y: 32px; --grid-item-padding-x: 15px;" data-row-count="100">
                            <div class="jumbotron rounded o_cc o_cc1 o_colored_level o_grid_item g-col-lg-12 g-height-8 col-lg-12"
                                 data-name="Box" style="grid-area: 1 / 1 / 9 / 7; z-index: 1;">
                                <h1>
                                    <font style="font-size: 25px;" class="o_default_snippet_text">
                                        <h3 t-field="webistes.name"/>
                                        - Websites Details
                                    </font>
                                </h1>
                                <ul>
                                    <t t-foreach="webistes" t-as="webiste">
                                        <li>
                                            <t t-esc="webiste.desc"/>
                                        </li>
                                    </t>
                                </ul>
                            </div>

                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

<template id="website">
    <t t-call="website.layout">
        <!-- Include necessary CSS and JavaScript libraries -->
        <link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet"/>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

        <!-- Main content -->
        <div class="container">
            <table id="example" class="table table-striped" style="width:100%">
                <thead>
                    <tr>
                        <th>Website</th>
                        <th>Site URL</th>
                        <th>Vendor Sites</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Table rows will be populated dynamically -->
                </tbody>
                <tfoot>
                    <tr>
                        <th>Website</th>
                        <th>Site URL</th>
                        <th>Vendor Sites</th>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Script to initialize DataTable and handle pagination -->
        <script type="text/javascript">
            $(document).ready(function() {
                console.log("Document is ready. Initializing DataTable...");

                var table = $('#example').DataTable({
                    "processing": true,
                    "serverSide": true,
                    "ajax": {
                        "url": "/indika/paginate",
                        "type": "POST",
                        "contentType": "application/json",
                        "data": function (d) {
                            console.log("Sending data to server:", d);
                            return JSON.stringify(d);
                        },
                        "dataSrc": function (json) {
                            console.log("Received data from server:", json);

                            // Log entire JSON response to check structure
                            console.log("Full JSON response:", JSON.stringify(json));

                            if (json.result) {
                                var result = json.result;
                                if (result.data) {
                                    console.log("Data array:", JSON.stringify(result.data));
                                    return result.data;
                                } else {
                                    console.error("No 'data' field in JSON result");
                                    return [];
                                }
                            } else {
                                console.error("No 'result' field in JSON response");
                                return [];
                            }
                        },
                        "error": function(xhr, errorType, exception) {
                            console.error("Ajax error:", xhr, errorType, exception);
                        }
                    },
                    "columns": [
                        { "data": "name" },
                        { "data": "url" },
                        { "data": "url" }
                    ],
                    "paging": true,
                    "pageLength": 10, // Number of rows per page
                    "info": true,
                    "lengthChange": true // Enable changing the number of rows per page
                });

                console.log("DataTable initialized:", table);
            });
        </script>
    </t>
</template>




</odoo>
